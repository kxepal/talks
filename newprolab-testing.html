<!doctype html>
<html lang="ru">

<head>
    <meta charset="utf-8">

    <title>Data Engineer 1.0: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞.</title>

    <meta name="description"
          content="">
    <meta name="author" content="Alexander Shorin">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style"
          content="black-translucent">

    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/serif.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/pdf.css' : 'css/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>

    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <![endif]-->
    <style>
        img {
            border: 0 !important;
            box-shadow: 0 0 0 !important;
        }
        .reveal pre {
            width: 100% !important;
            font-size: 0.65em !important;
        }
    </style>
</head>

<body>

<div class="reveal">
    <div class="slides">
        <section>
            <h2>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –≤ Python</h2>
            <p>
                <small>
                    –®–æ—Ä–∏–Ω –ê–ª–µ–∫—Å–∞–Ω–¥—Ä / <a href="http://github.com/kxepal">@kxepal</a>
                </small>
            </p>
        </section>

        <section>
            <h3>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ - —Ç–µ–º–∞ —Ö–æ–ª–∏–≤–æ—Ä–Ω–∞—è</h3>
            <img src="img/newprolab-testing-0.jpg"  style="width: 50%; height: 50%">
        </section>

        <section>
            <h3>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ - —Ç–µ–º–∞ —Ö–æ–ª–∏–≤–æ—Ä–Ω–∞—è</h3>
            <ul>
                <li>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –Ω–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å</li>
                <li>unit –∏–ª–∏ integrational —Ç–µ—Å—Ç—ã</li>
                <li>coverage: 100% –∏–ª–∏ –Ω–µ—Ç</li>
                <li>–ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —Ñ—É–∫–Ω—Ü–∏–∏: —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –Ω–µ—Ç</li>
                <li>...–∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ</li>
            </ul>
        </section>

        <section>
            <h3>–ü—Ä–∏—á–∏–Ω—ã –Ω–µ –ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã</h3>
            <ul>
                <li>–ú–Ω–µ –∑–∞ —ç—Ç–æ –Ω–µ –ø–ª–∞—Ç—è—Ç</li>
                <li>–≠—Ç–æ –∑–∞–º–µ–¥–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É</li>
                <li>–£ –Ω–∞—Å –µ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∏</li>
                <li>–Ø –Ω–µ —É–º–µ—é / –Ω–µ —Ö–æ—á—É / –Ω–µ –±—É–¥—É</li>
            </ul>
        </section>

        <section>
            <h3>–ü—Ä–∏—á–∏–Ω—ã –Ω–µ –ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã</h3>
            <img src="img/newprolab-testing-1.png">
        </section>

        <section>
            <h3>–ü—Ä–∏—á–∏–Ω—ã –ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã</h3>
            <ul>
                <li>–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–≤–æ–µ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞</li>
                <li>–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–µ–ª–∏–∑–∞ –ø—Ä–æ–¥—É–∫—Ç–∞</li>
                <li>–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π</li>
                <li>–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞</li>
                <li>–ö–æ–Ω—Ç—Ä–æ–ª—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</li>
                <li>–ß—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ —Å—Ç—ã–¥–Ω–æ –ø–µ—Ä–µ–¥ –∫–æ–ª–ª–µ–≥–∞–º–∏</li>
            </ul>
        </section>

        <section>
            <h4>–ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã vs –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã</h4>
            <blockquote style="text-align: left">
                Unit tests tell a developer that the code is doing things
                right;
                <br><br>
                Functional tests tell a developer that the code is doing the
                right things.
            </blockquote>
        </section>

        <section>
            <h4>–ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã vs –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã</h4>
            <img src="img/newprolab-testing-3.gif">
        </section>

        <section>
            <h3>Coverage 100%</h3>
            <q site="http://www.drmaciver.com/2015/04/some-empirically-derived-testing-principles/">
                100% coverage tells you nothing, but less than 100% coverage
                tells you something.
            </q>
        </section>

        <section>
            <h3>unittest vs pytest</h3>
        </section>

        <section>
            <h3>–ò—Å—Ç–æ—Ä–∏—è unittest</h3>
            <ul>
                <li>SUnit, 1994–≥.</li>
                <li>JUnit, 1998–≥.</li>
                <li>PyUnit, 1999–≥.</li>
                <li>unittest, 2001–≥.</li>
            </ul>
        </section>

        <section>
            <h3>–ù–∞—Å–ª–µ–¥–Ω–∏–µ SUnit / JUnit</h3>
            <ul>
                <li>setUp</li>
                <li>tearDown</li>
                <li>assertTrue</li>
                <li>assertEqual</li>
                <li>assertNotEqueal</li>
                <li>assertGreatherEqual</li>
                <li>...</li>
            </ul>
        </section>

        <section>
            <h3>–ü—Ä–∏–º–µ—Ä</h3>
            <pre><code class=python data-trim>
import unittest

class TestStringMethods(unittest.TestCase):

  def test_split(self):
    s = 'hello world'
    self.assertEqual(s.split(), ['hello', 'world'])
    # check that s.split fails when the separator is not a string
    with self.assertRaises(TypeError):
      s.split(2)

if __name__ == '__main__':
  unittest.main()
                </code></pre>
        </section>

        <section>
            <h3>–ü–æ—á–µ–º—É –º—ã –Ω–µ –±—É–¥–µ–º —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å unittest</h3>
            <ul>
                <li>UnPythonic API</li>
                <li>–û–û–ü –ø–æ–¥—Ö–æ–¥ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é</li>
                <li>–í–≤–æ–¥—è—â–µ–µ –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</li>
            </ul>
        </section>

        <section>
            <q site="https://bugs.python.org/issue17908#msg242166">
                &ldquo;Eveybody is using pytest anyway...&rdquo;
                <br>
                -- Guido Van Rossum
            </q>
        </section>

        <section>
            <h3>–í –∑–∞—â–∏—Ç—É unittest</h3>
            <ul>
                <li>–î–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∫–æ—Ä–æ–±–∫–∏</li>
                <li>–í Python 3.x –ø–æ–ª—É—á–∏–ª —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ API: –±–æ–ª—å—à–µ assert*
                    –º–µ—Ç–æ–¥–æ–≤, –ø–æ–¥—Ä–±–Ω—ã–µ –æ—Ç—á–µ—Ç—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏–π, –ø–æ–¥—Ç–µ—Å—Ç—ã
                </li>
            </ul>
        </section>

        <section>
            <h3>pytest</h3>
            <ul>
                <li>Pythonic</li>
                <li>–ü—Ä–æ—Å—Ç –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</li>
                <li>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –∏ –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤</li>
                <li>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–∫—Å—Ç—É—Ä</li>
                <li>–ü–∞—Ä–∞–º–µ—Ç–µ—Ä–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤</li>
                <li>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–æ–¥–ø–∞–∫–µ—Ç–æ–≤</li>
                <li>–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</li>
                <li>–ë–æ–ª–µ–µ 300+ –ø–ª–∞–≥–∏–Ω–æ–≤</li>
            </ul>
        </section>

        <section>
            <h3>–ß—Ç–æ —Ç–∞–∫–æ–µ Pythonic?</h3>
            <table>
                <thead>
                <th>unittest</th>
                <th>pytest</th>
                </thead>
                <tbody>
                <tr>
                    <td>assertTrue(X)</td>
                    <td>assert X</td>
                </tr>
                <tr>
                    <td>assertIs(X, True)</td>
                    <td>assert X is True</td>
                </tr>
                <tr>
                    <td>assertEqual(X, Y)</td>
                    <td>assert X == Y</td>
                </tr>
                <tr>
                    <td>assertNotEqual(X, Y)</td>
                    <td>assert X != Y</td>
                </tr>
                <tr>
                    <td>assertGreaterEqual(X, Y)</td>
                    <td>assert X >= Y</td>
                </tr>
                <tr>
                    <td>assertIn(X, Y)</td>
                    <td>assert X in Y</td>
                </tr>
                </tbody>
            </table>
        </section>

        <section>
            <h3>pytest: —Ñ–∏–∫—Å—Ç—É—Ä—ã</h3>
            <pre><code class=python data-trim>
@pytest.fixture(scope='global')
def sc():
  sc = SparkContext()
  yield sc
  sc.stop()

@pytest.fixture(scope='module')
def hivectx(sc):
  return HiveContext(sc)

@pytest.fixture(scope='function')
def df(sc):
  df = sc.parallelize([[1, 2, 3] * 5]).toDF()
  return df

def test_etl(df):
  ...
                </code></pre>
        </section>

        <section>
            <h3>pytest: –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</h3>
            <pre><code class=python data-trim>
+ tests /
  +-- classifiers/
      +-- __init__.py
      +-- conftest.py
      +-- test_age_clasifier.py
      +-- test_gender_clasifier.py
  +-- conftest.py
  +-- test_pipeline.py
                </code></pre>
            <h4>–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∏–∑ conftest! <br>
                –ü–æ–ª–∞–≥–∞–π—Ç–µ—Å—å –Ω–∞ –º–∞–≥–∏—é.</h4>
        </section>

        <section>
            <h3>pytest-–ø–ª–∞–≥–∏–Ω—ã</h3>
            <ul>
                <li>cagoule - —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è</li>
                <li>cov - –æ—Ç—á–µ—Ç –ø–æ –ø–æ–∫—Ä—ã—Ç–∏—é –∫–æ–¥–∞</li>
                <li>sugar - –∫—Ä–∞—Å–∏–≤—ã–π cli –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å</li>
                <li>flake8, isort, pylint - –∫–æ–Ω—Ç—Ä–æ–ª—å —Å—Ç–∏–ª—è –∫–æ–¥–∞</li>
                <li>xdist - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤</li>
                <li>aiohttp, mongodb, postgresql, mysql, asyncio, ...</li>
            </ul>
            <h4>–°–æ—Ç–Ω–∏ –∏—Ö!</h4>
        </section>

        <section>
            <h4>–î–∞–≤–∞–π—Ç–µ —á—Ç–æ-–Ω–∏—É–¥—å –ø–æ-—Ç–µ—Å—Ç–∏—Ä—É–µ–º</h4>
            <pre><code class=python data-trim>
def qsort(list_):
    if len(list_) <= 1:
        return list_
    head = qsort([x for x in list_[1:] if x < list_[0]])
    tail = qsort([x for x in list_[1:] if x > list_[0]])
    return head + [list_[0]] + tail
                </code></pre>
            <h5>(–¥–∞, –≤ –∂–∏–∑–Ω–∏ –≤—Å–µ —Å–ª–æ–∂–Ω–µ–µ)</h5>
        </section>

        <section>
            <h4>–¢–µ—Å—Ç–∏—Ä—É–µ–º</h4>
            <pre><code class=python data-trim>
def test_empty():
    assert qsort([]) == []

def test_sort():
    assert qsort([3, 2, 1]) == [1, 2, 3]

def test_sorted():
    assert qsort([1, 2, 3]) == [1, 2, 3]
                </code></pre>
        </section>

        <section>
            <h4>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö</h4>
            <pre><code class=python data-trim>
@pytest.mark.parametrize(('value', 'result'), [
    ([], []),
    ([1, 2, 3], [1, 2, 3]),
    ([3, 2, 1], [1, 2, 3]),
])
def test_qsort(value, result):
    assert qsort(value) == result
</code></pre>
        </section>

        <section>
            <h3>–í—Ä–æ–¥–µ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç</h3>
            <pre><code class=python data-trim>
$ pytest test_qsort.py

plugins: sugar-0.9.0

 test_qsort.py::test_qsort[value0-result0] ‚úì  33% ‚ñà‚ñà‚ñà‚ñç
 test_qsort.py::test_qsort[value1-result1] ‚úì  67% ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñã
 test_qsort.py::test_qsort[value2-result2] ‚úì 100% ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
</code></pre>
        </section>

        <section>
            <h3>–ü—Ä–æ–±–ª–µ–º—ã</h3>
            <ul>
                <li>–ú—ã –ø—Ä–æ–≤–µ—Ä–∏–ª–∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤.</li>
                <li>–°–∫–æ–ª—å–∫–æ –µ—â–µ –Ω—É–∂–Ω–æ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏
                    —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏?
                </li>
                <li>–ê –æ–Ω–æ —Ç–æ—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</li>
            </ul>
        </section>

        <section>
            <h3>Property Based Testing</h3>
            <ul>
                <li>–≠—Ç–æ –∫–∞–∫ QuickCheck</li>
                <li>–í–º–µ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä–æ–∫ ‚Äú–æ–∂–∏–¥–∞–Ω–∏–µ-—Ä–µ–∑—É–ª—å—Ç–∞—Ç‚Äù –ø—Ä–æ–≤–µ—Ä—è–µ—Ç–µ —Å–≤–æ–π—Å—Ç–≤–∞
                    —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
                </li>
                <li>Fuzzing? –î–∞, –ø–æ—Ö–æ–∂–µ!</li>
            </ul>
        </section>

        <section>
            <h3>QuickCheck</h3>
            <ul>
                <li>–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ Haskell</li>
                <li>–û—Å–Ω–æ–≤—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –Ω–∞—É—á–Ω–æ-–∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ä–∞–±–æ—Ç–∞—Ö</li>
                <li>–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ
                    —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π –∏ —Å–≤–æ–π—Å—Ç–≤
                    –¥–∞–Ω–Ω—ã—Ö
                </li>
                <li>–ü–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ Scala, Erlang, Clojure, JavaScript...</li>
                <li>http://www.cse.chalmers.se/~rjmh/QuickCheck/</li>
            </ul>
        </section>

        <section>
            <h4>–ö–∞–∫ –æ–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø—Ä–∏–º–µ—Ä–Ω–æ)</h4>
            <pre style="font-size: 0.55em !important; width: 90% !important;"><code class=text>

               passed
  +-----------------------+
  v                       |
+-----------+  sample   +------+  failed   +----------+     +--------+
| Generator | --------> | Test | --------> | Shrinker | --> | Report |
+-----------+           +------+           +----------+     +--------+
  |                       ^       sample     |                ^
  |                       +------------------+                |
  |                                                           |
  +-----------------------------------------------------------+
                                success
            </code></pre>
        </section>

        <section>
            <h3>–í—ã–≥–ª—è–¥–∏—Ç –ø—Ä–æ—Å—Ç–æ?</h3>
        </section>

        <section>
            <h3>–ù–µ–ª—å–∑—è –ø—Ä–æ—Å—Ç–æ –≤–∑—è—Ç—å –∏ –Ω–∞–ø–∏—Å–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π QuickCheck</h3>
            <ul>
                <li>https://github.com/agrif/pyquickcheck</li>
                <li>https://github.com/Cue/qc</li>
                <li>https://github.com/dbravender/qc</li>
                <li>https://github.com/futoase/PyQCheck</li>
                <li>https://github.com/JesseBuesking/pythoncheck</li>
                <li>https://github.com/markchadwick/paycheck</li>
                <li>https://github.com/msoedov/quick.py</li>
                <li>https://github.com/npryce/python-factcheck</li>
                <li>https://github.com/Xion/pyqcy</li>
                <li>https://github.com/zombiecalypse/qcc</li>
                <li>https://pypi.python.org/pypi/pytest-quickcheck</li>
                <li>...</li>
            </ul>
        </section>

        <section>
            <h3>Hypothesis</h3>
            <ul>
                <li>–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è Property-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</li>
                <li>–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞ –≤–∞—Å</li>
                <li>–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ –∑–∞ –≤–∞—Å</li>
                <li>–ù–∞—Ö–æ–¥–∏—Ç –Ω–∞–∏–º–µ–Ω—å—à–∏–π –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –ª–æ–º–∞—é—â–∏–π —Ç–µ—Å—Ç</li>
                <li>–ó–∞–±–æ—Ç–∏—Ç—Å—è –æ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–µ –≤–∞—à–∏—Ö —Ç–µ—Å—Ç–æ–≤</li>
                <li>–ì–∏–±–æ–∫, —Ä–∞—Å—à–∏—Ä—è–µ–º, —É–¥–æ–±–µ–Ω</li>
                <li>–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å pytest –∏–∑ –∫–æ—Ä–æ–±–∫–∏!</li>
            </ul>
        </section>

        <section>
            <h4>–¢–µ—Å—Ç–∏—Ä—É–µ–º —Å–≤–æ–π—Å—Ç–≤–∞</h4>
            <pre><code class=python data-trim>
@given(st.lists(st.integers()))
def test_qsort(input_list):
    sorted_list = qsort(input_list)

    assert len(sorted_list) == len(input_list)

    for item in sorted_list:
       assert item in input_list
       input_list.remove(item)
    assert len(input_list) == 0

    assert all(sorted_list[i - 1] <= sorted_list[i]
                for i in range(1, len(sorted_list)))
</code></pre>
        </section>

        <section>
            <h4>–ò –Ω–∞—Ö–æ–¥–∏–º –æ—à–∏–±–∫—É</h4>
            <pre><code class=python data-trim>
    @given(st.lists(st.integers()))
    def test_qsort(input_list):
        sorted_list = qsort(input_list)
>       assert len(sorted_list) == len(input_list)
E       assert 1 == 2
E        +  where 1 = len([0])
E        +  and   2 = len([0, 0])

</code></pre>
        </section>

        <section>
            <h4>–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤ Hypothesis</h4>
            <pre><code class=python data-trim>
>>> integers().example()
-150670313531850699691400483021473874929

>>> integers(min_value=-1, max_value=100).example()
-1

>>> integers(min_value=0).filter(lambda i: i % 2 == 0).example()
106140

</code></pre>
        </section>

        <section>
            <h4>–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤ Hypothesis</h4>
            <pre><code class=python data-trim>
>>> integers().example()
-150670313531850699691400483021473874929

>>> integers(min_value=-1, max_value=100).example()
-1

>>> integers(min_value=0).filter(lambda i: i % 2 == 0).example()
106140
</code></pre>
        </section>

        <section>
            <h4>–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤ Hypothesis</h4>
            <pre><code class=python data-trim>
>>> integers().wrapped_strategy
WideRangeIntStrategy()

>>> integers(min_value=42, max_value=100).wrapped_strategy
BoundedIntStrategy(42, 100)

>>> integers(min_value=-5, max_value=100).wrapped_strategy
integers(min_value=0, max_value=100) \
    | integers(min_value=-5, max_value=0)
</code></pre>
        </section>

        <section>
            <h4>–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤ Hypothesis</h4>
            <pre><code class=python data-trim>
>>> floats(min_value=-1, max_value=1).example()
0.6611503674557068

>>> floats().example()
-inf
</code></pre>
        </section>

        <section>
            <h4>–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤ Hypothesis</h4>
            <pre><code class=python data-trim>
>>> text().example()
'\U000cea1b\x1b\x0c(0\U000a90eb\x08\x1d'

>>> text(string.hexdigits).map(str.upper).example()
'A5BBF104DAD1FC9EFCAF1'

>>> text(characters(whitelist_categories={'Lu', 'Ll'})).example()
'ùú∞œ•û§òœπÔΩô‚∞¢√ªùíà ñÍùñ'
</code></pre>
        </section>

        <section>
            <h4>–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤ Hypothesis</h4>
            <pre><code class=python data-trim>

>>> from_regex('^(?:not )?to beer$').example()
'to beer\n'

>>> from_regex(
...   '^\d{2} bottles of beer on the (?:wall|table)'
... ).example()
'‡πô€≤ bottles of beer on the table\U00072e0b\x00&$'

</code></pre>
        </section>

        <section>
            <h4>–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤ Hypothesis</h4>
            <pre><code class=python data-trim>
>>> arrays(dtype=np.float16,
...        shape=3,
...        elements=floats(0, 1)).example()
array([ 0.45361328,  0.45361328,  0.97607422], dtype=float16)

>>> cols = columns(['a', 'b'], dtype=np.float16)
>>> rows = tuples(floats(0, 1), floats(0, 1))
>>> data_frames(cols, rows).example()
          a         b
0  0.446045  0.578613
1  0.600098  0.611328
</code></pre>
        </section>

        <section>
            <h4>–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤ Hypothesis...–∏—Ö –º–Ω–æ–≥–æ!</h4>
            <table>
                <tr>
                    <td>tuples</td>
                    <td>binary</td>
                    <td>one_of</td>
                </tr>
                <tr>
                    <td>lists</td>
                    <td>datetimes</td>
                    <td>sampled_from</td>
                </tr>
                <tr>
                    <td>dicts</td>
                    <td>times</td>
                    <td>builds</td>
                </tr>
                <tr>
                    <td>fixed_dictionaries</td>
                    <td>decimals</td>
                    <td>permutations</td>
                </tr>
                <tr>
                    <td>sets</td>
                    <td>namedtuples</td>
                    <td>from_type</td>
                </tr>
                <tr>
                    <td>iterables</td>
                    <td>uuids</td>
                    <td>choices</td>
                </tr>
            </table>
        </section>

        <section>
            <h4>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏</h4>
            <pre><code class="python" data-trim="">
@st.composite
def path_absolute(draw, segment_strategy=None):
    """Generates strictly absolute paths per :rfc:`3986#3.3`::
        path-absolute = "/" [ segment-nz *( "/" segment ) ]
    """
    acc = ['/']
    num_segments = draw(st.integers(min_value=1, max_value=255))
    acc.append(draw(segment_nz(segment_strategy)))
    acc.extend(draw(st.lists(
        segment(segment_strategy).map(partial(operator.add, '/')),
        max_size=num_segments - 1 or 0,
    )))
    return ''.join(acc)
            </code></pre>
        </section>

        <section>
            <h4>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏</h4>
            <pre><code class="python" data-trim="">
def url():
    return st.builds(build_url, scheme(), authority(), path(),
                     query(), fragment())

def authority():
    return st.builds(build_authority, userinfo(), host(), port())

def userinfo():
    return st.builds(build_userinfo, username(), password())

def username():
    return st.text().map(quote)
            </code></pre>
        </section>


        <section>
            <h3>Health Checks</h3>
            <ul>
                <li><b>data_too_large</b>: –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ —Ä–∞–∑–º–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö;
                </li>
                <li><b>filter_too_much</b>: —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–∏—Ç–µ
                    –ø–æ–¥—Ö–æ–¥ –∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö;
                </li>
                <li><b>too_slow</b>: —Å–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –∏–∑-–∑–∞
                    –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö;
                </li>
                <li><b>hung_test</b>: —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ–ª—å—à–µ 5 –º–∏–Ω—É—Ç;</li>
            </ul>
        </section>


        <section>
            <h4>Health Checks - test run deadline</h4>
            <pre><code class="python" data-trim>

def test_fun(sc, rows):
    df = sc.parallelize(rows).toDF()
    ...

test.py::test_fun
  hypothesis_temporary_module_a95cb91fb51532e1e8b5af575d554e4d39:24:
HypothesisDeprecationWarning: Test took 4335.64ms to run. In future
the default deadline setting will be 200ms, which will make this an
error. You can set deadline to an explicit value of e.g. 4400 to
turn tests slower than this into an error, or you can set it to None
to disable this check entirely.

            </code></pre>
        </section>

        <section>
            <h3>–ß—Ç–æ –∂–µ –¥–µ–ª–∞—Ç—å?</h3>
            <ul>
                <li>–ü–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã!</li>
                <li>–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —á–µ—Ä–µ–∑ Public API, –∏–∑–±–µ–≥–∞–π—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤;</li>
                <li>–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –±–∏–∑–Ω–µ—Å –∫–µ–π—Å—ã;</li>
                <li>–ó–∞–∫—Ä—ã–≤–∞–π—Ç–µ unit-—Ç–µ—Å—Ç–∞–º–∏ —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–ª–æ–∂–Ω–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏, –ª–∏–±–æ –æ–Ω–∏ —Ä–µ–¥–∫–∏;</li>
                <li>–°—Ç—Ä–µ–º–∏—Ç–µ—Å—å –∫ coverage 100%, –Ω–æ –Ω–µ –±—É–¥—å—Ç–µ –∏–º –æ—Å–ª–µ–ø–ª–µ–Ω—ã;</li>
                <li>–ü–æ–ª—å–∑—É–π—Ç–µ—Å—å –∑–¥—Ä–∞–≤—ã–º —Å–º—ã—Å–ª–æ–º –∏ –±—É–¥—å—Ç–µ –ø—Ä–æ—â–µ;</li>
            </ul>
        </section>

        <section>
            <h3>–°—Å—ã–ª–∫–∏</h3>
            <ul>
                <li>pytest<br/>
                    https://pytest.org</li>
                <li>Hypothesis<br/>
                    http://hypothesis.works/</li>
                <li>Hypothesis Talks<br/>
                    https://github.com/DRMacIver/hypothesis-talks</li>
                <li>How I handled Erlang R18 Maps with QuickCheck<br/>
                    https://vimeo.com/143849945</li>
            </ul>
        </section>

        <section>
            <h3>–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ!</h3>
            <h3>–°–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ —Å–≤–æ–∏ –æ—Ç–≤–µ—Ç—ã!</h3>
        </section>
    </div>
</div>

<script src="js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>

    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
            {
                src: 'js/highlight.js',
                async: true,
                callback: function () {
                    hljs.initHighlightingOnLoad();
                }
            },
            {src: 'js/zoom.js', async: true}
        ]
    });

</script>

</body>
</html>
